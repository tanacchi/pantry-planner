# DBマイグレーション・データ移行運用ガイド

このドキュメントは、pantry-plannerプロジェクトのDBマイグレーション・データ移行・スキーマ管理・運用ルールをまとめたものです。

## 1. マイグレーション運用

- Prisma Migrateでスキーマ管理
- マイグレーションファイルは必ずgit管理
- up/downスクリプトを必ず用意

## 2. 運用フロー

1. スキーマ変更時は`prisma migrate dev`でマイグレーション作成
2. 影響範囲・データ移行要否を確認
3. PRでレビュー・CIでテスト
4. 本番反映は`prisma migrate deploy`で実施

## 3. データ移行

- 既存データの変換・移行は専用スクリプトで管理
- 影響範囲・ロールバック手順も明記

## 4. テスト・ロールバック

- テストDBで必ず検証
- 失敗時はdownスクリプトで即時ロールバック

## 5. ドキュメント化

- 変更内容・移行手順は必ずdocs/配下に記録

---

詳細はrelease-management.md, incident-response.md, env-config.md等を参照。
