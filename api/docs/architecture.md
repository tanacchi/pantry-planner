# アーキテクチャ方針

本プロジェクトは、保守性・拡張性・堅牢性を重視し、クリーンアーキテクチャおよびドメイン駆動設計（DDD）の原則に基づいて設計されています。

## レイヤー構成

- **ドメイン層**: ビジネスルールやエンティティ、値オブジェクト、ドメインサービスを定義します。外部依存を持たず、最も安定した層です。
- **アプリケーション層**: ユースケースやサービス、DTOの変換、トランザクション管理など、アプリケーション固有の処理を担います。ドメイン層のロジックを組み合わせて業務フローを実現します。
- **インフラ層**: データベースや外部API、ファイルシステムなどの技術的な詳細をラップします。Repositoryや外部サービスの実装が含まれます。
- **インターフェース層（API/プレゼンテーション）**: ControllerやGraphQL Resolver、Web UIなど、外部との入出力を担います。

## モジュール分割と粒度

- 各ビジネスドメインごとに `modules/` 配下で分離（例: item, pantry, user, shopping-item, message など）。
- モジュール内はさらに `domain/`, `application/`, `infrastructure/` などのサブディレクトリで責務を明確化。
- モジュール間の依存は最小限とし、共通処理は `shared/` 配下に集約。

## 責務の分離

- ドメイン層はアプリケーション層やインフラ層に依存しません。
- アプリケーション層はドメイン層にのみ依存し、インフラ層の実装はDI（依存性注入）で受け取ります。
- インフラ層はアプリケーション層・ドメイン層のインターフェースを実装します。

## 依存関係逆転の原則

- 依存性は内側（ドメイン）に向かってのみ流れます。
- インターフェースをドメイン/アプリケーション層で定義し、インフラ層で実装します。

---
